{"ast":null,"code":"import _objectSpread from \"/Users/hy/Desktop/project6/node_modules/@babel/runtime/helpers/esm/objectSpread\";\nimport _classCallCheck from \"/Users/hy/Desktop/project6/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/hy/Desktop/project6/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/hy/Desktop/project6/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/hy/Desktop/project6/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/hy/Desktop/project6/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/hy/Desktop/project6/src/UserPrevRace.js\";\nimport React, { Component } from 'react';\nimport firebase from './firebase.js';\nimport Animation from './Animation.js';\nimport './styles/PrevRaces.css';\nimport raceEnd from './raceEnd.png';\nimport logo from './logo.png';\nimport swal from '@sweetalert/with-react';\n\nvar UserPrevRace =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(UserPrevRace, _Component);\n\n  function UserPrevRace() {\n    var _this;\n\n    _classCallCheck(this, UserPrevRace);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(UserPrevRace).call(this));\n\n    _this.showRaces = function () {\n      _this.setState({\n        view: true\n      });\n    };\n\n    _this.sortByNums = function () {\n      var races = _this.state.saved;\n      var noCheckpoint = [];\n      var hasCheckpoint = [];\n      races.forEach(function (race) {\n        if (race.selectedCheckpoint) {\n          hasCheckpoint.push(race);\n        } else {\n          noCheckpoint.push(race);\n        }\n      });\n      hasCheckpoint.sort(function (raceA, raceB) {\n        return raceB.selectedCheckpoint.length - raceA.selectedCheckpoint.length;\n      });\n      var newSortedRaces = hasCheckpoint.concat(noCheckpoint);\n\n      _this.setState({\n        saved: newSortedRaces\n      });\n    };\n\n    _this.sortByTime = function () {\n      _this.setState({\n        saved: _this.state.races\n      });\n    };\n\n    _this.state = {\n      saved: [],\n      races: [],\n      view: null,\n      timeTrack: {},\n      currentTrack: {}\n    };\n    return _this;\n  }\n\n  _createClass(UserPrevRace, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var authID = this.props.authID;\n      var itemsRef = firebase.database().ref(\"authUsers/\".concat(authID));\n      itemsRef.on('value', function (saved) {\n        var newRace = [];\n        var newTime = [];\n        var data = saved.val();\n\n        for (var key in data) {\n          newRace.push(_objectSpread({\n            key: key\n          }, data[key]));\n          newTime.push({\n            key: key,\n            startTime: '',\n            checkTime: [],\n            endTime: '',\n            length: ''\n          });\n        }\n\n        var updateRaces = newRace.reverse();\n\n        _this2.setState({\n          saved: updateRaces,\n          races: updateRaces,\n          timeTrack: newTime\n        });\n\n        setTimeout(_this2.showRaces, 1500);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.view) {\n        return React.createElement(\"section\", {\n          className: \"prevRacesComponent\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          className: \"headerContent\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"nav\", {\n          className: \"headerNav clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"logo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"t\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, \"T\"), React.createElement(\"img\", {\n          src: logo,\n          alt: \"Toronto bike share logo.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }), \" Bike Share Races\"), React.createElement(\"ul\", {\n          className: \"headerList clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 101\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          className: \"home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: this.props.handleBack,\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        }, \"Home\")), React.createElement(\"li\", {\n          className: \"prevRaces\",\n          onClick: this.handlePrevRace,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 103\n          },\n          __self: this\n        }, \"Previous Races\")))), React.createElement(\"div\", {\n          className: \"hamburgerMenu\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        }, React.createElement(\"nav\", {\n          className: \"hamNav\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 107\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"logo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"t\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, \"T\"), React.createElement(\"img\", {\n          src: logo,\n          alt: \"Toronto bike share logo.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }), \" Bike Share Races\"), React.createElement(\"input\", {\n          className: \"hamburgerOpen\",\n          id: \"toggleOpen\",\n          type: \"checkbox\",\n          name: \"toggle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          htmlFor: \"toggleOpen\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 110\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          class: \"fa fa-bars\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        })), React.createElement(\"ul\", {\n          className: \"hamburgerList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 113\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          htmlFor: \"toggleOpen\",\n          class: \"hamburgerClose\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          class: \"fas fa-times\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        })), React.createElement(\"li\", {\n          className: \"home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: this.props.handleBack,\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, \"Home\")), React.createElement(\"li\", {\n          className: \"prevRaces\",\n          onClick: this.handlePrevRace,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 118\n          },\n          __self: this\n        }, \"Previous Races\")))))), React.createElement(\"h2\", {\n          className: \"prevRaceTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        }, \"Here Are Your Previous Races \", React.createElement(\"i\", {\n          class: \"fas fa-bicycle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 123\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"sortButton\",\n          onClick: this.sortByNums,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124\n          },\n          __self: this\n        }, \"Sort By Checkpoints\"), React.createElement(\"button\", {\n          className: \"sortButton\",\n          onClick: this.sortByTime,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 125\n          },\n          __self: this\n        }, \"Sort By Created Time\"), React.createElement(\"div\", {\n          className: \"savedRacesContainer clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 126\n          },\n          __self: this\n        }, this.state.saved.map(function (races) {\n          return React.createElement(\"div\", {\n            className: \"savedRaces\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 130\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 131\n            },\n            __self: this\n          }, \"Created at: \", races.timeCreated), React.createElement(\"h3\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 132\n            },\n            __self: this\n          }, \"Race Name: \", races.name), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133\n            },\n            __self: this\n          }, \"Description: \", races.description), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            class: \"fas fa-flag-checkered\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 134\n            },\n            __self: this\n          }), \" Startpoint: \", races.startPoint), React.createElement(\"ul\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 135\n            },\n            __self: this\n          }, races.selectedCheckpoint ? races.selectedCheckpoint.map(function (checkpoint) {\n            return React.createElement(\"li\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 138\n              },\n              __self: this\n            }, checkpoint);\n          }) : null), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: raceEnd,\n            alt: \"Race Finish Banner\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 142\n            },\n            __self: this\n          }), \" Endpoint: \", races.endPoint));\n        })));\n      } else {\n        return React.createElement(Animation, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 152\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return UserPrevRace;\n}(Component);\n\nexport default UserPrevRace;","map":{"version":3,"sources":["/Users/hy/Desktop/project6/src/UserPrevRace.js"],"names":["React","Component","firebase","Animation","raceEnd","logo","swal","UserPrevRace","showRaces","setState","view","sortByNums","races","state","saved","noCheckpoint","hasCheckpoint","forEach","race","selectedCheckpoint","push","sort","raceA","raceB","length","newSortedRaces","concat","sortByTime","timeTrack","currentTrack","authID","props","itemsRef","database","ref","on","newRace","newTime","data","val","key","startTime","checkTime","endTime","updateRaces","reverse","setTimeout","handleBack","handlePrevRace","map","timeCreated","name","description","startPoint","checkpoint","endPoint"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport firebase from './firebase.js';\nimport Animation from './Animation.js';\nimport './styles/PrevRaces.css';\nimport raceEnd from './raceEnd.png';\nimport logo from './logo.png';\nimport swal from '@sweetalert/with-react';\n\nclass UserPrevRace extends Component {\n    constructor() {\n        super()\n        this.state = {\n            saved: [],\n            races: [],\n            view: null,\n            timeTrack: {},\n            currentTrack: {}\n        }\n    }\n\n    componentDidMount() {\n        const authID = this.props.authID\n        const itemsRef = firebase.database().ref(`authUsers/${authID}`);\n        itemsRef.on('value', (saved) => {\n            let newRace = [];\n            let newTime = [];\n\n            const data = saved.val();\n            for (let key in data) {\n                newRace.push(\n                    {key:key,\n                    ...data[key]\n                    }\n                    );\n\n                newTime.push(\n                    {\n                        key: key,\n                        startTime: '',\n                        checkTime: [],\n                        endTime: '',\n                        length: '' \n                    }\n                )\n            }\n            const updateRaces = newRace.reverse();\n\n            this.setState({\n                saved: updateRaces,\n                races: updateRaces,\n                timeTrack: newTime\n            })\n\n            setTimeout(this.showRaces, 1500);\n        })\n    };\n\n    showRaces = () => {\n        this.setState({\n            view: true\n        })\n    };\n\n    sortByNums = () => {\n        const races = this.state.saved;\n        const noCheckpoint = [];\n        const hasCheckpoint = [];\n\n        races.forEach((race) => {\n            if (race.selectedCheckpoint) {\n                hasCheckpoint.push(race);\n            } else {\n                noCheckpoint.push(race);\n            }\n        })\n\n        hasCheckpoint.sort((raceA, raceB) => {\n            return raceB.selectedCheckpoint.length - raceA.selectedCheckpoint.length;\n        })\n\n        const newSortedRaces = hasCheckpoint.concat(noCheckpoint);\n        this.setState({\n            saved: newSortedRaces\n        })\n    }\n\n    sortByTime = () => {\n        this.setState({\n            saved: this.state.races\n        })\n    }\n\n\n    render() {\n        if (this.state.view) {\n            return (\n                    <section className=\"prevRacesComponent\">\n                    <header className=\"headerContent\">\n                            <nav className=\"headerNav clearfix\">\n                            <h2 className=\"logo\"><span className=\"t\">T</span><img src={logo} alt=\"Toronto bike share logo.\" /> Bike Share Races</h2>\n                                <ul className=\"headerList clearfix\">\n                                    <li className=\"home\"><a onClick={this.props.handleBack} href=\"#\">Home</a></li>\n                                    <li className=\"prevRaces\" onClick={this.handlePrevRace}><a href=\"#\">Previous Races</a></li>\n                                </ul>\n                            </nav>\n                            <div className=\"hamburgerMenu\">\n                                <nav className=\"hamNav\">\n                                    <h2 className=\"logo\"><span className=\"t\">T</span><img src={logo} alt=\"Toronto bike share logo.\" /> Bike Share Races</h2>\n                                    <input className=\"hamburgerOpen\" id=\"toggleOpen\" type=\"checkbox\" name=\"toggle\" />\n                                        <label htmlFor=\"toggleOpen\">\n                                        <i class=\"fa fa-bars\"></i>\n                                        </label>\n                                        <ul className=\"hamburgerList\">\n                                        <label htmlFor=\"toggleOpen\" class=\"hamburgerClose\">\n                                            <i class=\"fas fa-times\"></i>\n                                        </label>\n                                            <li className=\"home\"><a onClick={this.props.handleBack} href=\"#\">Home</a></li>\n                                            <li className=\"prevRaces\" onClick={this.handlePrevRace}><a href=\"#\">Previous Races</a></li>\n                                        </ul>\n                                </nav>    \n                            </div>\n                        </header>\n                        <h2 className=\"prevRaceTitle\">Here Are Your Previous Races <i class=\"fas fa-bicycle\"></i></h2>\n                        <button className=\"sortButton\" onClick={this.sortByNums}>Sort By Checkpoints</button>\n                        <button className=\"sortButton\" onClick={this.sortByTime}>Sort By Created Time</button>\n                        <div className=\"savedRacesContainer clearfix\">\n                            {\n                                this.state.saved.map((races) => {\n                                    return (\n                                        <div className=\"savedRaces\">\n                                            <p>Created at: {races.timeCreated}</p>\n                                            <h3>Race Name: {races.name}</h3>\n                                            <p>Description: {races.description}</p>\n                                            <p><i class=\"fas fa-flag-checkered\"></i> Startpoint: {races.startPoint}</p>\n                                            <ul>\n                                                {races.selectedCheckpoint ?\n                                                    races.selectedCheckpoint.map((checkpoint) => {\n                                                        return <li>{checkpoint}</li>\n                                                    })\n                                                    : null}\n                                            </ul>\n                                            <p><img src={raceEnd} alt=\"Race Finish Banner\" /> Endpoint: {races.endPoint}</p>\n                                        </div>\n                                    )\n                                })\n\n                            }\n                        </div>\n                    </section>\n            )\n        } else {\n            return <Animation />;\n        }\n    }\n}\n\nexport default UserPrevRace"]},"metadata":{},"sourceType":"module"}