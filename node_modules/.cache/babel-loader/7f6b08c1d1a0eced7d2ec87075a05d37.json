{"ast":null,"code":"import _classCallCheck from \"/Users/Cian/Desktop/websites/hackeryou/projects/project 6/proj-repo/TorontoBikeShareRaces/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/Users/Cian/Desktop/websites/hackeryou/projects/project 6/proj-repo/TorontoBikeShareRaces/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"/Users/Cian/Desktop/websites/hackeryou/projects/project 6/proj-repo/TorontoBikeShareRaces/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"/Users/Cian/Desktop/websites/hackeryou/projects/project 6/proj-repo/TorontoBikeShareRaces/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _inherits from \"/Users/Cian/Desktop/websites/hackeryou/projects/project 6/proj-repo/TorontoBikeShareRaces/node_modules/@babel/runtime/helpers/esm/inherits\";\nvar _jsxFileName = \"/Users/Cian/Desktop/websites/hackeryou/projects/project 6/proj-repo/TorontoBikeShareRaces/src/PrevRaces.js\";\nimport React, { Component } from 'react';\nimport firebase from './firebase';\nimport './styles/PrevRaces.css';\nimport Animation from './Animation.js';\nimport './styles/Setup.css';\nimport raceEnd from './raceEnd.png';\nimport logo from './logo.png';\n\nvar PrevRaces =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(PrevRaces, _Component);\n\n  function PrevRaces() {\n    var _this;\n\n    _classCallCheck(this, PrevRaces);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(PrevRaces).call(this));\n\n    _this.showRaces = function () {\n      _this.setState({\n        view: true\n      });\n    };\n\n    _this.sortByNums = function () {\n      var races = _this.state.saved;\n      console.log(races);\n      var noCheckpoint = [];\n      var hasCheckpoint = [];\n      races.forEach(function (race) {\n        if (race.selectedCheckpoint) {\n          hasCheckpoint.push(race);\n        } else {\n          noCheckpoint.push(race);\n        }\n      });\n      var sortRaces = hasCheckpoint.sort(function (raceA, raceB) {\n        return raceB.selectedCheckpoint.length - raceA.selectedCheckpoint.length;\n      });\n      console.log(sortRaces);\n      var newSortedRaces = hasCheckpoint.concat(noCheckpoint);\n\n      _this.setState({\n        saved: newSortedRaces\n      });\n    };\n\n    _this.sortByTime = function () {\n      _this.setState({\n        saved: _this.state.races\n      });\n    };\n\n    _this.state = {\n      saved: [],\n      races: [],\n      view: null\n    };\n    return _this;\n  }\n\n  _createClass(PrevRaces, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      var itemsRef = firebase.database().ref();\n      itemsRef.on('value', function (saved) {\n        var newState = [];\n        var data = saved.val();\n\n        for (var key in data) {\n          newState.push(data[key]);\n        }\n\n        var savedRaces = [];\n\n        for (var i = 1; i < newState.length - 1; i++) {\n          savedRaces.push(newState[i]);\n        }\n\n        var updateRaces = savedRaces.reverse();\n\n        _this2.setState({\n          saved: updateRaces,\n          races: updateRaces\n        });\n\n        setTimeout(_this2.showRaces, 1500);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (this.state.view) {\n        return React.createElement(\"section\", {\n          className: \"prevRacesComponent\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87\n          },\n          __self: this\n        }, React.createElement(\"header\", {\n          className: \"headerContent\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88\n          },\n          __self: this\n        }, React.createElement(\"nav\", {\n          className: \"headerNav clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"logo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"t\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }, \"T\"), React.createElement(\"img\", {\n          src: logo,\n          alt: \"Toronto bike share logo.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90\n          },\n          __self: this\n        }), \" Bike Share Races\"), React.createElement(\"ul\", {\n          className: \"headerList clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 91\n          },\n          __self: this\n        }, React.createElement(\"li\", {\n          className: \"home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: this.props.handleBack,\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92\n          },\n          __self: this\n        }, \"Home\")), React.createElement(\"li\", {\n          className: \"prevRaces\",\n          onClick: this.handlePrevRace,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93\n          },\n          __self: this\n        }, \"Previous Races\")))), React.createElement(\"div\", {\n          className: \"hamburgerMenu\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 96\n          },\n          __self: this\n        }, React.createElement(\"nav\", {\n          className: \"hamNav\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 97\n          },\n          __self: this\n        }, React.createElement(\"h2\", {\n          className: \"logo\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, React.createElement(\"span\", {\n          className: \"t\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }, \"T\"), React.createElement(\"img\", {\n          src: logo,\n          alt: \"Toronto bike share logo.\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 98\n          },\n          __self: this\n        }), \" Bike Share Races\"), React.createElement(\"input\", {\n          className: \"hamburgerOpen\",\n          id: \"toggleOpen\",\n          type: \"checkbox\",\n          name: \"toggle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 99\n          },\n          __self: this\n        }), React.createElement(\"label\", {\n          htmlFor: \"toggleOpen\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 100\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          class: \"fa fa-bars\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 102\n          },\n          __self: this\n        })), React.createElement(\"ul\", {\n          className: \"hamburgerList\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104\n          },\n          __self: this\n        }, React.createElement(\"label\", {\n          htmlFor: \"toggleOpen\",\n          class: \"hamburgerClose\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 105\n          },\n          __self: this\n        }, React.createElement(\"i\", {\n          class: \"fas fa-times\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 106\n          },\n          __self: this\n        })), React.createElement(\"li\", {\n          className: \"home\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          onClick: this.props.handleBack,\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 108\n          },\n          __self: this\n        }, \"Home\")), React.createElement(\"li\", {\n          className: \"prevRaces\",\n          onClick: this.handlePrevRace,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: \"#\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 109\n          },\n          __self: this\n        }, \"Previous Races\")))))), React.createElement(\"h2\", {\n          className: \"prevRaceTitle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        }, \"Previous Races \", React.createElement(\"i\", {\n          class: \"fas fa-bicycle\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 114\n          },\n          __self: this\n        })), React.createElement(\"button\", {\n          className: \"sortButton\",\n          onClick: this.sortByNums,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 115\n          },\n          __self: this\n        }, \"Sort By Checkpoints\"), React.createElement(\"button\", {\n          className: \"sortButton\",\n          onClick: this.sortByTime,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 116\n          },\n          __self: this\n        }, \"Sort By Created Time\"), React.createElement(\"div\", {\n          className: \"savedRacesContainer clearfix\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 117\n          },\n          __self: this\n        }, this.state.saved.map(function (races) {\n          return React.createElement(\"div\", {\n            className: \"savedRaces\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 121\n            },\n            __self: this\n          }, React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 122\n            },\n            __self: this\n          }, \"Created at: \", races.timeCreated), React.createElement(\"h3\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 123\n            },\n            __self: this\n          }, \"Race Name: \", races.name), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 124\n            },\n            __self: this\n          }, \"Description: \", races.description), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }, React.createElement(\"i\", {\n            class: \"fas fa-flag-checkered\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 125\n            },\n            __self: this\n          }), \" Startpoint: \", races.startPoint), React.createElement(\"ul\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 126\n            },\n            __self: this\n          }, races.selectedCheckpoint ? races.selectedCheckpoint.map(function (checkpoint) {\n            return React.createElement(\"li\", {\n              __source: {\n                fileName: _jsxFileName,\n                lineNumber: 129\n              },\n              __self: this\n            }, checkpoint);\n          }) : null), React.createElement(\"p\", {\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133\n            },\n            __self: this\n          }, React.createElement(\"img\", {\n            src: raceEnd,\n            alt: \"Race Finish Banner\",\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 133\n            },\n            __self: this\n          }), \" Endpoint: \", races.endPoint));\n        })));\n      } else {\n        return React.createElement(Animation, {\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 143\n          },\n          __self: this\n        });\n      }\n    }\n  }]);\n\n  return PrevRaces;\n}(Component);\n\nexport default PrevRaces;","map":{"version":3,"sources":["/Users/Cian/Desktop/websites/hackeryou/projects/project 6/proj-repo/TorontoBikeShareRaces/src/PrevRaces.js"],"names":["React","Component","firebase","Animation","raceEnd","logo","PrevRaces","showRaces","setState","view","sortByNums","races","state","saved","console","log","noCheckpoint","hasCheckpoint","forEach","race","selectedCheckpoint","push","sortRaces","sort","raceA","raceB","length","newSortedRaces","concat","sortByTime","itemsRef","database","ref","on","newState","data","val","key","savedRaces","i","updateRaces","reverse","setTimeout","props","handleBack","handlePrevRace","map","timeCreated","name","description","startPoint","checkpoint","endPoint"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport firebase from './firebase';\nimport './styles/PrevRaces.css';\nimport Animation from './Animation.js'\nimport './styles/Setup.css';\nimport raceEnd from './raceEnd.png';\nimport logo from './logo.png';\n\nclass PrevRaces extends Component {\n    constructor() {\n        super()\n        this.state = {\n            saved: [],\n            races:[],\n            view: null\n        }\n    }\n\n    componentDidMount() {\n        const itemsRef = firebase.database().ref();\n        itemsRef.on('value', (saved) => {\n            let newState = [];\n\n            const data = saved.val();\n\n            for (let key in data) {\n                newState.push(data[key]);\n            }\n\n            const savedRaces = []\n\n            for (let i = 1; i < newState.length-1; i++) {\n                savedRaces.push(newState[i]);\n            }\n\n            const updateRaces = savedRaces.reverse();\n\n            this.setState({\n                saved: updateRaces,\n                races: updateRaces\n            })\n\n            setTimeout(this.showRaces,1500);\n        })\n    };\n\n    showRaces = () =>{\n        this.setState({\n            view: true\n        })\n    }\n\n    sortByNums = () =>{\n        const races = this.state.saved;\n        console.log(races);\n        const noCheckpoint = [];\n        const hasCheckpoint = [];\n        \n        races.forEach((race)=>{\n            if(race.selectedCheckpoint){\n                hasCheckpoint.push(race);\n            } else {\n                noCheckpoint.push(race);\n            }\n        })\n\n        const sortRaces = hasCheckpoint.sort((raceA, raceB) => {\n            return raceB.selectedCheckpoint.length - raceA.selectedCheckpoint.length;\n        })\n        \n        console.log(sortRaces);\n        const newSortedRaces = hasCheckpoint.concat(noCheckpoint);\n        this.setState({\n            saved: newSortedRaces\n        })\n    }\n\n    sortByTime = () => {\n        this.setState({\n            saved: this.state.races\n        })\n    }\n\n    render() {\n        if (this.state.view){\n            return (\n                    <section className=\"prevRacesComponent\">\n                        <header className=\"headerContent\">\n                            <nav className=\"headerNav clearfix\">\n                            <h2 className=\"logo\"><span className=\"t\">T</span><img src={logo} alt=\"Toronto bike share logo.\" /> Bike Share Races</h2>\n                                <ul className=\"headerList clearfix\">\n                                    <li className=\"home\"><a onClick={this.props.handleBack} href=\"#\">Home</a></li>\n                                    <li className=\"prevRaces\" onClick={this.handlePrevRace}><a href=\"#\">Previous Races</a></li>\n                                </ul>\n                            </nav>\n                            <div className=\"hamburgerMenu\">\n                                <nav className=\"hamNav\">\n                                    <h2 className=\"logo\"><span className=\"t\">T</span><img src={logo} alt=\"Toronto bike share logo.\" /> Bike Share Races</h2>\n                                    <input className=\"hamburgerOpen\" id=\"toggleOpen\" type=\"checkbox\" name=\"toggle\" />\n                                        <label htmlFor=\"toggleOpen\">\n                                \n                                        <i class=\"fa fa-bars\"></i>\n                                        </label>\n                                        <ul className=\"hamburgerList\">\n                                        <label htmlFor=\"toggleOpen\" class=\"hamburgerClose\">\n                                            <i class=\"fas fa-times\"></i>\n                                        </label>\n                                            <li className=\"home\"><a onClick={this.props.handleBack} href=\"#\">Home</a></li>\n                                            <li className=\"prevRaces\" onClick={this.handlePrevRace}><a href=\"#\">Previous Races</a></li>\n                                        </ul>\n                                </nav>    \n                            </div>\n                        </header>\n                        <h2 className=\"prevRaceTitle\">Previous Races <i class=\"fas fa-bicycle\"></i></h2>\n                        <button className=\"sortButton\" onClick={this.sortByNums}>Sort By Checkpoints</button>\n                        <button className=\"sortButton\" onClick={this.sortByTime}>Sort By Created Time</button>\n                        <div className=\"savedRacesContainer clearfix\">\n                            {\n                                this.state.saved.map((races) => {\n                                return (\n                                        <div className=\"savedRaces\">\n                                            <p>Created at: {races.timeCreated}</p>\n                                            <h3>Race Name: {races.name}</h3>\n                                            <p>Description: {races.description}</p>\n                                            <p><i class=\"fas fa-flag-checkered\"></i> Startpoint: {races.startPoint}</p>\n                                            <ul>\n                                            {races.selectedCheckpoint?\n                                                races.selectedCheckpoint.map((checkpoint) => {\n                                                return <li>{checkpoint}</li>\n                                                })\n                                            : null}\n                                            </ul>\n                                            <p><img src={raceEnd} alt=\"Race Finish Banner\" /> Endpoint: {races.endPoint}</p>\n                                        </div>\n                                    )\n                                })\n        \n                            }\n                        </div>\n                    </section>\n            )\n        }else{\n            return <Animation />;\n        }\n    }\n}\n\nexport default PrevRaces"]},"metadata":{},"sourceType":"module"}